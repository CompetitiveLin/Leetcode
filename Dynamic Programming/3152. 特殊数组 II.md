#### 3152. 特殊数组 II

难度：中等

---

如果数组的每一对相邻元素都是两个奇偶性不同的数字，则该数组被认为是一个  **特殊数组**  。

周洋哥有一个整数数组 `nums` 和一个二维整数矩阵 `queries`，对于 `queries[i] = [fromi, toi]`，请你帮助周洋哥检查子数组 `nums[fromi..toi]` 是不是一个  **特殊数组**  。

返回布尔数组 `answer`，如果 `nums[fromi..toi]` 是特殊数组，则 `answer[i]` 为 `true` ，否则，`answer[i]` 为 `false` 。

 **示例 1：** 

 **输入：** nums = \[3,4,1,2,6\], queries = \[\[0,4\]\]

 **输出：** \[false\]

 **解释：** 

子数组是 `[3,4,1,2,6]`。2 和 6 都是偶数。

 **示例 2：** 

 **输入：** nums = \[4,3,1,6\], queries = \[\[0,2\],\[2,3\]\]

 **输出：** \[false,true\]

 **解释：** 

1.  子数组是 `[4,3,1]`。3 和 1 都是奇数。因此这个查询的答案是 `false`。
2.  子数组是 `[1,6]`。只有一对：`(1,6)`，且包含了奇偶性不同的数字。因此这个查询的答案是 `true`。

 **提示：** 

*   `1 <= nums.length <= 10^5`
*   `1 <= nums[i] <= 10^5`
*   `1 <= queries.length <= 10^5`
*   `queries[i].length == 2`
*   `0 <= queries[i][0] <= queries[i][1] <= nums.length - 1`

---

动态规划：

一维数组 `dp[i]` 表示下标 `i` 的数是特殊数组的第几个数。例如 `[3,4,1,2,6]` 所对应的 `dp[i]` 分别是 `[1, 2, 3, 4, 1]`，前四个数为一组特殊数组，最后一个数单独构成一组特殊数组。然后根据给定的区间和当前下标的值进行比较。

```Go
func isArraySpecial(nums []int, queries [][]int) []bool {
    n := len(nums)
    dp := make([]int, n)
    dp[0] = 1
    for i := 1; i < n; i++ {
        dp[i] = 1
        if ((nums[i] ^ nums[i - 1]) & 1 == 1) {
            dp[i] = dp[i - 1] + 1
        }
    }
    res := []bool{}
    for i := range queries {
        gap := queries[i][1] - queries[i][0]
        res = append(res, dp[queries[i][1]] >= gap + 1)
    }
    return res
}
```